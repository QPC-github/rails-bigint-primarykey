# This file is auto-generated when running `rails generate bigint_pk:install`
# by the gem rails-bigint-pk (https://github.com/VerticalResponse/rails-bigint-pk).

class <%= @name.camelize %> < ActiveRecord::Migration
  # https://github.com/soundcloud/large-hadron-migrator
  def self.up
    Lhm.change_table :<%= @klass.table_name %> do |m|
      <%- if @set_primary_key -%>
      m.change_column :<%= @klass.primary_key %>, "BIGINT(20) AUTO_INCREMENT" 
      <%- end -%>

      <%- @references.each do |reference| -%>
      m.change_column :<%= reference %>, "BIGINT(20)"
      <%- end -%>
    end
  end

  def self.down
    Lhm.change_table :<%= @klass.table_name %> do |m|
      <%- if @set_primary_key -%>
      m.change_column :<%= @klass.primary_key %>, "INT(11)"
      <%- end -%>

      <%- @references.each do |reference| -%>
      m.change_column :<%= reference %>, "INT(11)"
      <%- end -%>
    end
  end
end
